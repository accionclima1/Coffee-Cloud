<script type="text/ng-template" id="/messenger.html">
	    <div class="container-fluid messenger" ng-controller="MessengerCtrl">
		<!-- Modal -->
			<div class="modal fade" id="myModalUserImage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
					
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">Imagen de Usuario</h4>
						</div>
						<div class="modal-body">
							<div ng-show="error" class="alert alert-danger row">
								<span>{{ error.message }}</span>
							</div>
							<div class="form-group">
								<label>Nombre:</label>
								<input type="text" class="form-control" ng-model="UserName"/>
							</div>	
							<div class="form-group">
								<label>Image:</label>
								<input type="file" id="userImage" file-model="myFile" />
							</div>	
							<div class="form-group">
								<div ng-show="message" class="bg-success ">
									<span>{{ message }}</span>
								</div>
								<div ng-show="error" class="alert alert-danger ">
									<span>{{ error.message }}</span>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
							<button type="button" ng-click="uploadPhoto()" class="btn btn-primary">Save</button>
						</div>
						
					</div>
				</div>
			</div>
			<!-- Modal -->

		    <div class="row">
			    <div class="col-md-3">
				    <div class="chat-list">
					    <div class="chat-item" ng-repeat="convo in chats" ng-click="loadChat($event,convo.sender)" ng-class="convo.sender==currentChat ? 'active' : ''">
						    <h4>{{ convo.sender }}</h4>
						    <p>{{ convo.messages.length }} mensajes</p>
						    <a class="closeChat" ng-click="deleteChat(convo.chatid)">X</a>
						</div>
					</div>
			    </div>
			    <div class="col-md-9">
				    	<div class="chat-head">
					    	<strong>Conversacion:</strong> {{ currentChat }}
					    </div>
				    	<div class="chatbox" scroll-glue>
							<div class="message" ng-repeat="message in chatLog">
								<div>
									<img class="userImage chat-image" ng-src="{{ message.imageurl }}" />&nbsp;<label class="chat-text" >{{ message.sender }}:</label>
									<div class="message-body chat-Body" >{{ message.bodyMsg }}</div>
								</div>
							</div>
						</div>
						
						<form class="type-sink form-inline" ng-submit="sendMessage()">
								<div class="form-group">
									<a ng-click="openImagePopup()"><img style="margin-top:0" class="userImage chat-image" src="{{ UserImageBottom }}" /></a>
									<label class="chat-text-bottom">{{ nickname }}</label>
									<label class="sr-only" for="chatMsg">Chat message</label>
									<input type="text" class="form-control" style="float:right;width:75%" name="chatMsg" id="chatMsg">						
									<input type="hidden" name="fromId" value="admin">
									<input type="hidden" name="toId" value="">
								</div>
							<button type="submit" class="btn btn-default chat-button">Enviar</button>
						</form>
			    </div>
			</div>
		</div>
	</script>