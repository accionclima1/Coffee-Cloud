<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>SB Admin - Bootstrap Admin Template</title>

    <!-- Bootstrap Core CSS -->
   <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
   <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <!-- Custom CSS -->
    <link href="stylesheets/sb-admin.css" rel="stylesheet">

    <!-- Morris Charts CSS -->
    <link href="stylesheets/plugins/morris.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    
    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
    <script src="/javascripts/validator.min.js"></script>
	<script src="/javascripts/muni14.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.10/angular-ui-router.js"></script>
	<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
	<script src="/bower_components/angular-socket-io/socket.min.js"></script>
	<script type="text/javascript" src="bower_components/tinymce-dist/tinymce.js"></script>
	 <script type="text/javascript" src="bower_components/angular-ui-tinymce/src/tinymce.js"></script>
	<script src="/javascripts/adminApp.js"></script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesnt work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body ng-app="coffeeScriptAdmin" ng-controller="MainCtrl" class="loggedOff">

    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/admin#/"> <img src="http://centroclima.org/images/SICA-logo.png" alt="" class="login-img"> Coffee Cloud <small>Admin</small></a>
            </div>
            <!-- Top Menu Items -->
            <ul class="nav navbar-right top-nav" >
	            <li>
	            	<div class="right-logo">
				    <img src="http://centroclima.org/images/CRRH.png" alt="CRRH" class="img-responsive">
			    </div>
	            </li>
               <!-- <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-envelope"></i> <b class="caret"></b></a>
                    <ul class="dropdown-menu message-dropdown">
                        <li class="message-preview">
                            <a>
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>{{ currentUser() }}</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a>
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-preview">
                            <a>
                                <div class="media">
                                    <span class="pull-left">
                                        <img class="media-object" src="http://placehold.it/50x50" alt="">
                                    </span>
                                    <div class="media-body">
                                        <h5 class="media-heading"><strong>John Smith</strong>
                                        </h5>
                                        <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                    </div>
                                </div>
                            </a>
                        </li>
                        <li class="message-footer">
                            <a href="#">Read All New Messages</a>
                        </li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-bell"></i> <b class="caret"></b></a>
                    <ul class="dropdown-menu alert-dropdown">
                        <li>
                            <a href="#">Alert Name <span class="label label-default">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-primary">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-success">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-info">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-warning">Alert Badge</span></a>
                        </li>
                        <li>
                            <a href="#">Alert Name <span class="label label-danger">Alert Badge</span></a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#">View All</a>
                        </li>
                    </ul>
                </li> -->
                <li class="dropdown" ng-show="isLoggedIn()">
                    <a class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> {{ currentUser() }} <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                       <!-- <li>
                            <a href="#"><i class="fa fa-fw fa-user"></i> Profile</a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw fa-envelope"></i> Inbox</a>
                        </li>
                        <li>
                            <a href="#"><i class="fa fa-fw fa-gear"></i> Settings</a>
                        </li>
                        <li class="divider"></li> -->
                        <li>
                            <a href="#" ng-click="logOut();"><i class="fa fa-fw fa-power-off"></i> Log Out</a>
                        </li>
                    </ul>
                </li>
            </ul>
            <!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav side-nav" ng-controller="NavCtrl" ng-show="curUserRole != 'Tecnico' && isLoggedIn()" ng-cloak>
                    <li ng-class="{ active: isActive('/home') }">
                        <a href="/admin#/"><i class="fa fa-fw fa-dashboard"></i> Escritorio</a>
                    </li>
                    <li ng-class="{ active: isActive('/adaptacion') }">
                        <a href="/admin#/adaptacion"><i class="fa fa-fw fa-shield"></i> Adaptación Climática </a>
                    </li>
                    <li ng-hide="curUserRole == 'Extensionista'" ng-class="{ active: isActive('/users') }">
                        <a href="/admin#/users"><i class="fa fa-fw fa-users"></i> Usuarios  {{ curUserRole }}</a>
                    </li>
                   <!--  <li>
                        <a href="#"><i class="fa fa-fw fa-umbrella"></i> Perspectiva Climática</a>
                    </li> -->
                    <li ng-class="{ active: isActive('/roya') }">
                        <a href="/admin#/roya"><i class="fa fa-fw fa-leaf"></i> Reportes Roya</a>
                    </li>
                    <li ng-class="{ active: isActive('/technical-recommendation') }">
                        <a href="/admin#/technical-recommendation"><i class="fa fa-fw fa-compass"></i> Recomendación Técnica  </a>
                    </li>
                     <li ng-class="{ active: isActive('/campo') }">
                        <a href="/admin#/campo"><i class="fa fa-fw fa-file-image-o"></i> Hoja de campo  </a>
                    </li>
                    <li ng-class="{ active: isActive('/noticias') }">
                        <a href="/admin#/noticias"><i class="fa fa-fw fa-newspaper-o"></i> Noticias</a>
                    </li>
                    <li ng-class="{ active: isActive('/messenger') }">
                        <a href="/admin#/messenger"><i class="fa fa-fw fa-comment"></i>  Consultas</a>
                    </li>
                    
                </ul>

                 <ul class="nav navbar-nav side-nav" ng-controller="NavCtrl" ng-show="isLoggedIn() && curUserRole == 'Tecnico'">
                    <li ng-class="{ active: isActive('/home') }">
                        <a href="/admin#/"><i class="fa fa-fw fa-dashboard"></i> Escritorio</a>
                    </li>
                    
                    <li ng-class="{ active: isActive('/technical-recommendation') }">
                        <a href="/admin#/technical-recommendation"><i class="fa fa-fw fa-users"></i> Recomendación Técnica  </a>
                    </li>

                    
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </nav>

        <div id="page-wrapper">
	        
	        <ui-view></ui-view>
           
            <!-- /.container-fluid -->
            
            <footer id="colophon" ng-controller="NavCtrl" class="site-footer" role="contentinfo" ng-hide="isActive('/messenger')">
	<div class="container">
		<div class="row text-center">
			<div class="site-footer-inner col-md-9">
			
			<h2>CENTRO CLIMA CUENTA CON EL APOYO TÉCNICO Y FINANCIERO DE:</h2>
				
			<img src="http://centroclima.org/wp-content/uploads/2016/06/xusaid.png.pagespeed.ic.HIzO6Beqa-.png" alt="logo">
			<img src="http://centroclima.org/wp-content/uploads/2016/06/xCATIE.png.pagespeed.ic.L70wLDKZif.png" alt="logo">
			<img src="http://centroclima.org/wp-content/uploads/2016/06/UICN.svg" alt="logo">
			<img src="http://centroclima.org/wp-content/uploads/2016/07/xLogo-CARE.png.pagespeed.ic.dbZiYO5x3e.png" alt="logo">
			<img src="http://centroclima.org/wp-content/uploads/2016/07/xLOGO-TERRA.png.pagespeed.ic.dE9zG_baAD.png" alt="logo">	
			<img src="http://centroclima.org/wp-content/uploads/2016/07/xLogo-DAI.jpg.pagespeed.ic.kT4r0zPv_X.webp" alt="logo">
			<img src="http://centroclima.org/wp-content/uploads/2016/06/xepa_seal_large_trim.png.pagespeed.ic.pR7AfJfuIv.png" alt="logo">
			
			</div>
			<div class="site-footer-inner col-md-3">
			
			<h2>EN COORDINACIÓN CON:</h2>
			
			<img src="http://centroclima.org/wp-content/uploads/2016/07/xLOGO-CCAD-HORIZONTAL-CON-SICA.png.pagespeed.ic.mlGYZrodRq.png" alt="logo">
				

			</div>
		</div>
	</div><!-- close .container -->
	<div class="copyright">
		<div class="right">
			<p>Todos los derechos reservados. Centro Clima 2016</p>
		</div>
		<div class="left"><ul id="foot-menu" class="nav navbar-nav"><li id="menu-item-114" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-114"><a title="Politicas" href="#">Politicas</a></li>
<li id="menu-item-151" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-151"><a title="Condiciones" href="#">Condiciones</a></li>
<li id="menu-item-116" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-116"><a title="Mapa del sitio" href="#">Mapa del sitio</a></li>
</ul></div>	</div>
</footer>

        </div>
        <!-- /#page-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- jQuery -->
    
    <script type="text/ng-template" id="/home.html">
	     <div class="container-fluid">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Escritorio
                        </h1>
                       
                    </div>
                </div>
              
                <!-- /.row -->

                <div class="row">
                    <div class="col-md-8">
	                     <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Lluvia acumulada de un día (TRMM) 
                                </h3>
                            </div>
                            <div class="panel-body">
	                            <iframe width="100%" height="600px" frameBorder="0" src="http://centroclima.org/lluvia-acumulada-de-un-dia-trmm/"></iframe>

                            </div>
	                     </div>
	                </div>
	                <div class="col-md-4">
	                    <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Estadisticas  
                                </h3>
                            </div>
                            <div class="panel-body">
	                          
	                          <div class="row">
		                          <div class="col-md-12">
			                          <div class="panel panel-green">
			                            <div class="panel-heading">
			                                <div class="row">
			                                    <div class="col-xs-3">
			                                        <i class="fa fa-leaf fa-5x"></i>
			                                    </div>
			                                    <div class="col-xs-9 text-right">
			                                        <div class="huge">{{chatsTotal.length}}</div>
			                                        <div>Reportes Roya</div>
			                                    </div>
			                                </div>
			                            </div>
			                            <a href="/admin#/roya">
			                                <div class="panel-footer">
			                                    <span class="pull-left">Ver Reportes</span>
			                                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
			                                    <div class="clearfix"></div>
			                                </div>
			                            </a>
			                        </div>
		                          </div>
		                          <div class="col-md-12">
			                          <div class="panel panel-primary">
			                            <div class="panel-heading">
			                                <div class="row">
			                                    <div class="col-xs-3">
			                                        <i class="fa fa-comments fa-5x"></i>
			                                    </div>
			                                    <div class="col-xs-9 text-right">
			                                        <div class="huge">{{royaTests.length}}</div>
			                                        <div>Consultas</div>
			                                    </div>
			                                </div>
			                            </div>
			                            <a href="/admin#/messenger">
			                                <div class="panel-footer">
			                                    <span class="pull-left">Ver Consultas</span>
			                                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
			                                    <div class="clearfix"></div>
			                                </div>
			                            </a>
			                        </div>
		                          </div>
		                          <div class="col-md-12">
			                          <div class="panel panel-yellow" ng-hide="curUserRole == 'Extensionista'">
			                            <div class="panel-heading">
			                                <div class="row">
			                                    <div class="col-xs-3">
			                                        <i class="fa fa-users fa-5x"></i>
			                                    </div>
			                                    <div class="col-xs-9 text-right">
			                                        <div class="huge">{{userList.length}}</div>
			                                        <div>Usuarios</div>
			                                    </div>
			                                </div>
			                            </div>
			                            <a href="/admin#/users">
			                                <div class="panel-footer">
			                                    <span class="pull-left">Ver Usuarios</span>
			                                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
			                                    <div class="clearfix"></div>
			                                </div>
			                            </a>
			                        </div>
		                          </div>
		                        </div>

                            </div>
	                     </div>
	                    
                    </div>
	                <div class="col-md-8">
	                     <div class="panel panel-default">
                            <div class="panel-heading">
                                <h3 class="panel-title">Lluvia acumulada (GPM)
                                </h3>
                            </div>
                            <div class="panel-body">
	                            <iframe width="100%" height="600px" frameBorder="0" src="http://centroclima.org/lluvia-acumulada-de-un-dia-gpm/"></iframe>

                            </div>
	                     </div>
	                </div>
                    
                </div>
                <!-- /.row -->
            </div>
    </script>
    <script type="text/ng-template" id="/register.html">
	  <div class="login-wrap">
		<div class="container-fluid">
			<div class="row">
				<div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3">
				  <img src="images/pages-logo-dark.png" alt="" class="register-img"/>
				  <h5>Registro</h5>
				  <div ng-show="error" class="alert alert-danger row">
				    <span>{{ error.message }}</span>
				  </div>

				  <form ng-submit="register()">

				    <div class="form-group">
				      <input type="text"
				      class="form-control"
				      placeholder="Nombre de usuario"
				      ng-model="user.username" required></input>
				    </div>
				    <div class="form-group">
				      <input type="text"
				      class="form-control"
				      placeholder="Numero Telefonico"
				      ng-model="user.phone" required></input>
				    </div>
				    <div class="form-group">
				      <input type="email"
				      class="form-control"
				      placeholder="Correo Electrónico"
				      ng-model="user.email" required></input>
				    </div>
				   <div class="form-group">
							    <div class="form-group">
							      <input type="password" data-minlength="6" class="form-control" id="inputPassword" placeholder="Contraseña" required>
							    </div>
							    <div class="form-group">
							      <input type="password" class="form-control" id="inputPasswordConfirm" data-match="#inputPassword" data-match-error="Whoops, these don't match" placeholder="Confirmar Contraseña" ng-model="user.password" required>
							      <div class="help-block with-errors"></div>
							    </div>
							</div>
				    				    <button type="submit" class="btn btn-primary">Registrarse</button>
				  </form>
				  </div>
			</div>
		</div>
	</div>
	</script>
    <script type="text/ng-template" id="/login.html">
		<div class="login-wrap">
		<div class="container-fluid">
			<div class="row">
				<div class="col-xs-10 col-xs-offset-1 col-sm-6 col-sm-offset-3">  
				  <div ng-show="error" class="alert alert-danger row">
				    <span>{{ error.message }}</span>
				  </div>
				  	<img src="images/pages-logo-light.png" alt="" class="login-img"/>
				  <form ng-submit="logIn()">
				    
				    <div class="form-group">
				       <label for="email">Correo Electrónico</label>
				      <input type="text" name="email"
				      class="form-control"
				      ng-model="user.username"></input>
				    </div>
				    <div class="form-group">
				      <label for="password">Contraseña</label>
				      <input type="password" name="password"
				      class="form-control"
				      ng-model="user.password"></input>
				    </div>
				    <button type="submit" class="btn btn-primary">Iniciar Sesión</button>
				    <a href="/admin#/register">¿No tiene cuenta?</a>
				  </form>
				</div>
			</div>
		</div>
	</div>
	  </script>
    <script type="text/ng-template" id="/messenger.html">
	    <div class="container-fluid messenger" ng-controller="MessengerCtrl">
		<!-- Modal -->
			<div class="modal fade" id="myModalUserImage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
					
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<h4 class="modal-title" id="myModalLabel">Imagen de Usuario</h4>
						</div>
						<div class="modal-body">
							<div ng-show="error" class="alert alert-danger row">
								<span>{{ error.message }}</span>
							</div>
							<div class="form-group">
								<label>Nombre:</label>
								<input type="text" class="form-control" ng-model="UserName"/>
							</div>	
							<div class="form-group">
								<label>Image:</label>
								<input type="file" id="userImage" file-model="myFile" />
							</div>	
							<div class="form-group">
								<div ng-show="message" class="bg-success ">
									<span>{{ message }}</span>
								</div>
								<div ng-show="error" class="alert alert-danger ">
									<span>{{ error.message }}</span>
								</div>
							</div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
							<button type="button" ng-click="uploadPhoto()" class="btn btn-primary">Save</button>
						</div>
						
					</div>
				</div>
			</div>
			<!-- Modal -->

		    <div class="row">
			    <div class="col-md-3">
				    <div class="chat-list">
					    <div class="chat-item" ng-repeat="convo in chats" ng-click="loadChat($event,convo.sender)" ng-class="convo.sender==currentChat ? 'active' : ''">
						    <h4>{{ convo.sender }}</h4>
						    <p>{{ convo.messages.length }} mensajes</p>
						    <a class="closeChat" ng-click="deleteChat(convo.chatid)">X</a>
						</div>
					</div>
			    </div>
			    <div class="col-md-9">
				    	<div class="chat-head">
					    	<strong>Conversacion:</strong> {{ currentChat }}
					    </div>
				    	<div class="chatbox" scroll-glue>
							<div class="message" ng-repeat="message in chatLog">
								<div>
									<img class="userImage chat-image" ng-src="{{ message.imageurl }}" />&nbsp;<label class="chat-text" >{{ message.sender }}:</label>
									<div class="message-body chat-Body" >{{ message.bodyMsg }}</div>
								</div>
							</div>
						</div>
						
						<form class="type-sink form-inline" ng-submit="sendMessage()">
								<div class="form-group">
									<a ng-click="openImagePopup()"><img style="margin-top:0" class="userImage chat-image" src="{{ UserImageBottom }}" /></a>
									<label class="chat-text-bottom">{{ nickname }}</label>
									<label class="sr-only" for="chatMsg">Chat message</label>
									<input type="text" class="form-control" style="float:right;width:75%" name="chatMsg" id="chatMsg">						
									<input type="hidden" name="fromId" value="admin">
									<input type="hidden" name="toId" value="">
								</div>
							<button type="submit" class="btn btn-default chat-button">Enviar</button>
						</form>
			    </div>
			</div>
		</div>
	</script>
    <script type="text/ng-template" id="/adaptacion.html">
	     <div class="container-fluid adaptacion-wrap">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Adaptación Climática
                        </h1>
                        <p class="lead">Recomendaciones </p>
                    </div>
                </div>
              
                <!-- /.row -->

                <div class="row">
                    <div class="col-md-12">
	                   <form ng-submit="saveTable()">
	                    <div class="table-responsive">
	                    <table class="table table-bordered">
						  <tr>
						    <th>Incidencia (%)</th>
						    <th>abril - junio</th>
						    <th>julio-setiembre</th>
						    <th>octubre-diciembre</th>
						  </tr>
						  <tr>
						    <td>&lt; 10</td>
						    <td><textarea ng-model="table.caseInidence10.abrilJunio"></textarea></td>
						    <td><textarea ng-model="table.caseInidence10.julioSetiembre"></textarea></td>
						    <td><textarea ng-model="table.caseInidence10.octubreDiciembre"></textarea></td>
						  </tr>
						  <tr>
						    <td>11 - 20</td>
						    <td><textarea ng-model="table.caseInidence1120.abrilJunio"></textarea></td>
						    <td><textarea ng-model="table.caseInidence1120.julioSetiembre"></textarea></td>
						    <td><textarea ng-model="table.caseInidence1120.octubreDiciembre"></textarea></td>
						  </tr>
						  <tr>
						    <td>21 - 50</td>
						    <td><textarea ng-model="table.caseInidence2150.abrilJunio"></textarea></td>
						    <td><textarea ng-model="table.caseInidence2150.julioSetiembre"></textarea></td>
						    <td><textarea ng-model="table.caseInidence2150.octubreDiciembre"></textarea></td>
						  </tr>
						  <tr>
						    <td>&gt; 50</td>
						    <td><textarea ng-model="table.caseInidence50.abrilJunio"></textarea></td>
						    <td><textarea ng-model="table.caseInidence50.julioSetiembre"></textarea></td>
						    <td><textarea ng-model="table.caseInidence50.octubreDiciembre"></textarea></td>
						  </tr>
						</table>
	                    </div>
	                    <button class="btn btn-primary">Guardar Camabios</button>
	                   </form>
                    </div>
                </div>
                

            </div>
    </script>
    <script type="text/ng-template" id="/users.html">
	     <div class="container-fluid users-wrap">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Administración de Usuarios
                        </h1>
                        <p class="lead col-md-4">Creación y Roles </p><div class="col-md-8 text-right"><button class="btn btn-primary" data-toggle="modal" data-target="#myModal">Nuevo Usuario</button></div>
                    </div>
                </div>
              
                <!-- /.row -->

                <div class="row">
                    <div class="col-md-12">
	                   <div class="user-editor">
		                   <div class="user-item" ng-repeat="user in userList">
			                   <span class="username">{{user.username}}</span> <span class="role">{{user.role}}</span>
			                   <button class="btn btn-default" ng-click="editUser(user)">Editar</button>
			                   <button class="btn btn-danger" ng-click="removeUser(user._id,$index)">X</button>
			                </div>
			            </div>
                    </div>
                </div>

				<!-- Modal -->
				<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				  <div class="modal-dialog" role="document">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				        <h4 class="modal-title" id="myModalLabel">Crear Usuario</h4>
				      </div>
				      <div class="modal-body">
						        <div ng-show="error" class="alert alert-danger row">
								    <span>{{ error.message }}</span>
								  </div>
				
								  <form ng-submit="createUser()" name="newuserForm" id="newserForm" data-toggle="validator">
				
								    <div class="form-group">
								      <input type="text"
								      class="form-control"
								      placeholder="Nombre de usuario"
								      ng-model="newUser.username" required></input>
								    </div>
								    <div class="form-group">
								      <input type="text"
								      class="form-control"
								      placeholder="Numero Telefonico"
								      ng-model="newUser.phone" required></input>
								    </div>
								    <div class="form-group">
								      <label>Rol:</label>
								      <select class="form-control" ng-model="newUser.role">
										  <option>Cliente</option>
										  <option>Extensionista</option>
                                          <option>Tecnico</option>
										  <option>Admin</option>
										</select>
								    </div>
                                    <div class="form-group">
                                      <label>Recomendación Técnica</label>
                                         <input type="text"
                                          class="form-control"
                                          placeholder="Recomendación Técnica"
                                          ng-model="newUser.recomendaciontecnica"></input>
                                    </div>
								    <div class="form-group">
								      <label>Departamento/Municipio:</label>
								      <select id="departamentos" class="form-control" required>
										</select>
								    </div>
								    <div class="form-group">
								      <input type="email"
								      class="form-control"
								      placeholder="Correo Electrónico"
								      ng-model="newUser.email" required></input>
								    </div>
								   <div class="form-group">
											    <div class="form-group">
											      <input type="password" data-minlength="6" class="form-control" id="inputPassword" placeholder="Contraseña" required>
											    </div>
											    <div class="form-group">
											      <input type="password" class="form-control" id="inputPasswordConfirm" data-match="#inputPassword" data-match-error="No coinciden! " placeholder="Confirmar Contraseña" ng-model="newUser.password" required>
											      <div class="help-block with-errors"></div>
											    </div>
											</div>
								    
								  
								  </form>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				        <button type="button" class="btn btn-primary"  form="newuserForm" ng-disabled="newuserForm.$invalid" ng-click="createUser()">Guardar Usuario</button>
				      </div>
				    </div>
				  </div>
				</div>
				
				<div class="modal fade" id="myModalEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				  <div class="modal-dialog" role="document">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				        <h4 class="modal-title" id="myModalLabel">Editar Usuario</h4>
				      </div>
				      <div class="modal-body">
						        <div ng-show="error" class="alert alert-danger row">
								    <span>{{ error.message }}</span>
								  </div>
				
								  <form ng-submit="saveUser()" name="edituserForm" id="edituserForm" data-toggle="validator">
				
								    <div class="form-group">
								      <input type="text"
								      class="form-control"
								      placeholder="Nombre de usuario"
								      ng-model="editUserO.username" disabled></input>
								    </div>
								    <div class="form-group">
								      <input type="text"
								      class="form-control"
								      placeholder="Numero Telefonico"
								      ng-model="editUserO.phone" required></input>
								    </div>
								    <div class="form-group">
								      <label>Rol:</label>
								      <select class="form-control" ng-model="editUserO.role">
                                          <option>Tecnico</option>
										  <option>Cliente</option>
										  <option>Extensionista</option>
										  <option>Admin</option>
										</select>
								    </div>
								   
								    <div class="form-group">
								      <input type="email"
								      class="form-control"
								      placeholder="Correo Electrónico"
								      ng-model="editUserO.email" required></input>
								    </div>
                                     <div class="form-group">
                                      <label>Recomendación Técnica</label>
                                         <input type="text"
                                          class="form-control"
                                          placeholder="Recomendación Técnica"
                                          ng-model="editUserO.recomendaciontecnica"></input>
                                    </div>
								   <div class="form-group">
											    <div class="form-group">
											      <input type="password" data-minlength="6" class="form-control" id="inputPasswordEdit" placeholder="Contraseña" >
											    </div>
											    <div class="form-group">
											      <input type="password" class="form-control" id="inputPasswordConfirmEdit" data-match="#inputPasswordEdit" data-match-error="No coinciden! " placeholder="Confirmar Contraseña" ng-model="editUserO.password" >
											      <div class="help-block with-errors"></div>
											    </div>
											</div>
											
								   <div class="form-group">
								  <div ng-show="message" class="bg-success ">
					    				<span>{{ message }}</span>
					  				</div>
								 <div ng-show="error" class="alert alert-danger ">
				  						<span>{{ error.message }}</span>
				 				 </div>
									</div>
								  
								  </form>
								  
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				        <button type="button" class="btn btn-primary"  form="edituserForm" ng-disabled="edituserForm.$invalid" ng-click="saveUser()" disabled>Guardar Usuario</button>
				      </div>
				    </div>
				  </div>
				</div>

            </div>
    </script>
    <script type="text/ng-template" id="/noticias.html">
	     <div class="container-fluid noticas-wrap">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Noticias
                        </h1>
                        <p class="lead col-md-4">Creación y Edicion </p><div class="col-md-8 text-right"><button class="btn btn-primary" data-toggle="modal" data-target="#myModal">Nueva Noticia</button></div>
                    </div>
                </div>
              
                <!-- /.row -->

                <div class="row">
                    <div class="col-md-12">
	                   <div class="news-editor">
		                   <div class="news-item" ng-repeat="post in posts | orderBy: '-createdAt'">
			                   <span class="title">{{post.title}}</span> <span class="date">{{post.createdAt | date:'MM/dd/yyyy'}}</span>
			                   <button class="btn btn-default"  ng-click="editPost(post)">Editar</button>
			                   <button class="btn btn-danger">X</button>
			                </div>
			            </div>
                    </div>
                </div>
  				<!-- Modal -->
				<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				  <div class="modal-dialog" role="document">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				        <h4 class="modal-title" id="myModalLabel">Nueva Noticia </h4>
				      </div>
				      <div class="modal-body">
				        <form ng-submit="publish()">
					         <div class="form-group">
							    <label for="title">Titulo</label>
							    <input type="text" class="form-control" id="title"  ng-model="newPost.title" required>
							  </div>
							  <textarea ui-tinymce="tinymceOptions" ng-model="newPost.content"></textarea>
				        </form>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
				        <button type="button" class="btn btn-primary" ng-click="publish()">Publicar</button>
				      </div>
				    </div>
				  </div>
				</div>
                
				
					<div class="modal fade" id="myModalPostEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				  <div class="modal-dialog" role="document">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				        <h4 class="modal-title" id="myModalLabel">Editar Noticia</h4>
				      </div>
				      <div class="modal-body">
						        <div ng-show="error" class="alert alert-danger row">
								    <span>{{ error.message }}</span>
								  </div>
				
								  <form ng-submit="savePost()" name="editnewsForm" id="editnewsForm" data-toggle="validator">
				
								  <div class="form-group">
							    <label for="title">Titulo</label>
							    <input type="text" class="form-control" id="title"  ng-model="editPostO.title" required>
							  </div>
							  <textarea ui-tinymce="tinymceOptions" ng-model="editPostO.content"></textarea>
											
								   <div class="form-group">
								  <div ng-show="message" class="bg-success ">
					    				<span>{{ message }}</span>
					  				</div>
								 <div ng-show="error" class="alert alert-danger ">
				  						<span>{{ error.message }}</span>
				 				 </div>
									</div>
								  
								  </form>
								  
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				        <button type="button" class="btn btn-primary"  form="editnewsForm" ng-disabled="editnewsForm.$invalid" ng-click="savePost()" disabled>Guardar Noticia</button>
				      </div>
				    </div>
				  </div>
				</div>

            </div>
			

            </div>
    </script>
    <script type="text/ng-template" id="/tech_recom.html">
         <div class="container-fluid roya-wrap">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Recomendación Técnica
                        </h1>
                        
                        <div class="col-md-12">

                        <div class=" form-inline">
                            <label>Fecha inicio:</label>
                            <input type="text" class="form-control date-field" placeholder="Fecha inicio" ng-model="search.dateFrom"></input>
                            
                            <label>fecha final</label>
                            <input type="text" class="form-control date-field" placeholder="Fecha final" ng-model="search.dateTo"></input>
                        </div>
                        </div>
                        <div class="col-md-12">
                        <div class="form-inline">
                        <br/>   
                            <label>Buscar por ID:</label> 
                            <input type="text"  class="form-control" ng-model="search._id" placeholder="Buscar por ID" />
                        </div>
                        </div>                
                        <br/>
                        <br/>
                        <p class="lead col-md-4">resultados: </p>
                            <div class="col-md-8 text-right">  
                                <button ng-click="exportData()" >Exportar</button>
                            </div>
                <!-- /.row -->
            <table class="table table-striped" style="display:none;" id='exportable'>
                <thead>
                    <tr>
                        <th ng-repeat="(i,th) in head" >{{th}}</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="row in testsList | orderBy : sort.column : sort.descending | myfilter:search">
                        <td ng-click="loadTest(row);">{{row.createdAt}}</td>
                        <td ng-click="loadTest(row);">{{row.departamento}}</td> 
                        <td ng-click="loadTest(row);">{{row.incidencia}}%</td>
                        <td ng-click="loadTest(row);">{{row.nombre}}</td> 
                        <td ng-click="loadTest(row);">{{row.tipoCafe}}</td> 
                        <td ng-click="loadTest(row);">{{row.user}}</td>
                        </tr>
                    </tr>
                </tbody>
            </table>
                <div class="row">
                    <div class="col-md-12">
                       <div class="roya-editor">
                           <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th ng-repeat="(i,th) in head" ng-class="selectedCls(i)" ng-click="changeSorting(i)">{{th}}</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="row in testsList | orderBy : sort.column : sort.descending | myfilter:search | startFrom:(currentPage-1)*pageSize | limitTo:pageSize">
                                        <td ng-click="loadTest(row);">{{row.createdAt}}</td>
                                        <td ng-click="loadTest(row);">{{row.departamento}}</td> 
                                        <td ng-click="loadTest(row);">{{row.incidencia}}%</td>
                                        <td ng-click="loadTest(row);">{{row.nombre}}</td> 
                                        <td ng-click="loadTest(row);">{{row.tipoCafe}}</td> 
                                        <td ng-click="loadTest(row);">{{row.user}}</td>
                                        <td> <button class="btn btn-danger" ng-click="removeTest(row._id)">X</button></td> 
                                        </tr>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="text-center">
                                <pagination page="currentPage" max-size="noOfPages" previous-text="<" next-text=">" first-text="<<" last-text=">>" boundary-link-numbers="true" total-items="totalItems" items-per-page="pageSize"></pagination>
                            </div>
                            <!-- Modal -->
                                <div class="modal fade" id="detailModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                                  <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title" id="myModalLabel">Detalle de Reporte</h4>
                                      </div>
                                      <div class="modal-body">
                                          <dl>
                                              <dt>ID:</dt>
                                              <dd>{{detail._id}}</dd>
                                              <dt>User:</dt>
                                              <dd>{{detail.user}}</dd>
                                              <dt>Creación:</dt>
                                              <dd>{{detail.createdAt}}</dd>
                                              <dt>Recomendación Técnica:</dt>
                                              <dd>{{detail.recomendaciontecnica}}</dd>
                                              <dt>Modo:</dt>
                                              <dd><span ng-show="detail.advMode">avanzado</span><span ng-hide="detail.advMode">Basico</span></dd>
                                              <dt>Bandolas:</dt>
                                              <dd><span ng-show="detail.bandolas">2</span><span ng-hide="detail.bandolas">1</span></dd>
                                              <dt>Plantas:</dt>
                                              <dd>{{detail.plantas.length}}</dd>
                                              <dt>Incidencia:</dt>
                                              <dd>{{ (detail.incidencia).toFixed(2) }}%</dd>
                                              <dt>incideancia Promedio por Planta:</dt>
                                              <dd>{{ (detail.inideanciaPromedioPlanta).toFixed(2) }}%</dd>
                                              <dt>Severidad Promedio:</dt>
                                              <dd>{{ (detail.severidadPromedio).toFixed(2) }}%</dd>
                                              <dt>Municipio:</dt>
                                              <dd>{{ detail.unidad.departamento }}</dd>
                                              <dt>Detalle Unidad:</dt>
                                              <dd>
                                              {{detail.unidad.nombre}}<br/>
                                              {{detail.unidad._id}}<br/>
                                              Actualizado: {{detail.unidad.updatedAt}} <br>
                                              Creado: {{detail.unidad.createdAt}}<br>
                                              <span ng-show="detail.unidad.sombra">Tiene Sombra</span><br>
                                              Altitud: {{detail.unidad.altitud}}<br>
                                              Area de Cafe: {{detail.unidad.areaCafe}}<br>
                                              Area total: {{detail.unidad.areaTotal}}<br>
                                              Distanciamiento: {{detail.unidad.distanciamiento}}<br>
                                              lote: {{detail.unidad.lote}}<br>
                                              Edad: {{detail.unidad.edadLote}}<br>
                                              Departamento: {{detail.unidad.departamento}}<br>
                                              Municipio: {{detail.unidad.municipio}}<br>
                                              rendimiento: {{detail.unidad.rendimiento}}<br>
                                              <span ng-show="detail.unidad.enmiendasSuelo">Enmiendas de Suelo</span><br>
                                              <span ng-show="detail.unidad.fertilizaFollaje">Fertiliza Follaje</span><br>
                                              <span ng-show="detail.unidad.fertilizaSuelo">Fertiliza Suelo: {{detail.unidad.fertilizaSueloMes}}</span><br>
                                              Inicia Cosecha: {{detail.unidad.inicioCosecha}}<br>
                                              Final Cosecha: {{detail.unidad.finalCosecha}}<br>
                                              Epoca lluviosa: {{detail.unidad.epocalluviosa}}<br>
                                              Fin Epoca lluviosa: {{detail.unidad.FinEpocalluviosa}}<br>
                                              <span ng-show="detail.unidad.fertilizaSuelo">Fertiliza Suelo</span><br>
                                              <span ng-show="detail.unidad.fungicidasRoya">Fungicidas de Roya: <span ng-show="detail.unidad.fungicidas.contacto">Contacto</span></span>, <span ng-show="detail.unidad.fungicidas.sistemico">Sistemico</span>; Fechas: {{detail.unidad.fungicidasFechas}}</span><br>
                                              <span ng-show="detail.unidad.manejoTejido">Manejo de Tejido: {{detail.unidad.manejoTejidoMes}}</span><br>
                                              <span ng-show="detail.unidad.muestreo">Muestreo: {{detail.unidad.muestreoMes}}</span><br>
                                              <span> Tipo de Cafe: <span ng-show="detail.unidad.tipoCafe.duro">duro</span> <span ng-show="detail.unidad.tipoCafe.estrictamenteDuro
">estrictamenteDuro</span> <span ng-show="detail.unidad.tipoCafe.extraprime
">extraprime</span> <span ng-show="detail.unidad.tipoCafe.prime
">prime</span> <span ng-show="detail.unidad.tipoCafe.semiduro
">semiduro</span></span><br>
                                              <span> Variedad: <span ng-show="detail.unidad.variedad.bourbon">bourbon</span> <span ng-show="detail.unidad.variedad.catuai
">catuai</span> <span ng-show="detail.unidad.variedad.caturra
">caturra</span> <span ng-show="detail.unidad.variedad.maragogype
">maragogype</span> </span><br>
                                              <span ng-show="detail.unidad.verificaAgua">Tipo de verificacion de Agua: <span ng-show="detail.unidad.verificaAguaTipo.dureza">Contacto,</span></span> <span ng-show="detail.unidad.verificaAguaTipo.ph">Sistemico</span></span>; Fechas: {{detail.unidad.fungicidasFechas}}<br>
                                              
                                              
                                              </dd>
                                            </dl>
                                       
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                        </div>
                    </div>
                </div>

                <!-- Modal -->
                <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">Crear Usuario</h4>
                      </div>
                      <div class="modal-body">
                                <div ng-show="error" class="alert alert-danger row">
                                    <span>{{ error.message }}</span>
                                  </div>
                
                                  <form ng-submit="createUser()" name="newuserForm" id="newserForm" data-toggle="validator">
                
                                    <div class="form-group">
                                      <input type="text"
                                      class="form-control"
                                      placeholder="Nombre de usuario"
                                      ng-model="newUser.username" required></input>
                                    </div>
                                    <div class="form-group">
                                      <input type="text"
                                      class="form-control"
                                      placeholder="Numero Telefonico"
                                      ng-model="newUser.phone" required></input>
                                    </div>
                                    <div class="form-group">
                                      <label>Rol:</label>
                                      <select class="form-control" ng-model="newUser.role">
                                          <option>Cliente</option>
                                          <option>Extensionista</option>
                                          <option>Admin</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                      <label>Departamento/Municipio:</label>
                                      <select id="departamentos" class="form-control" required>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                      <input type="email"
                                      class="form-control"
                                      placeholder="Correo Electrónico"
                                      ng-model="newUser.email" required></input>
                                    </div>
                                   <div class="form-group">
                                                <div class="form-group">
                                                  <input type="password" data-minlength="6" class="form-control" id="inputPassword" placeholder="Contraseña" required>
                                                </div>
                                                <div class="form-group">
                                                  <input type="password" class="form-control" id="inputPasswordConfirm" data-match="#inputPassword" data-match-error="No coinciden! " placeholder="Confirmar Contraseña" ng-model="newUser.password" required>
                                                  <div class="help-block with-errors"></div>
                                                </div>
                                            </div>
                                    
                                  
                                  </form>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary"  form="newuserForm" ng-disabled="newuserForm.$invalid" ng-click="createUser()">Guardar Usuario</button>
                      </div>
                    </div>
                  </div>
                </div>

            </div>
                </div>
         </div>
    </script>
    <script type="text/ng-template" id="/roya.html">
	     <div class="container-fluid roya-wrap">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Reportes de Roya
                        </h1>
                        
						<div class="col-md-12">

						<div class=" form-inline">
							<label>Fecha inicio:</label>
							<input type="text" class="form-control date-field" placeholder="Fecha inicio" ng-model="search.dateFrom"></input>
						    
							<label>fecha final</label>
							<input type="text" class="form-control date-field" placeholder="Fecha final" ng-model="search.dateTo"></input>
						</div>
						</div>
						<div class="col-md-12">
						<div class="form-inline">
						<br/>	
							<label>Buscar por ID:</label> 
							<input type="text"  class="form-control" ng-model="search._id" placeholder="Buscar por ID" />
						</div>
						</div>                
						<br/>
						<br/>
						<p class="lead col-md-4">resultados: </p>
							<div class="col-md-8 text-right">  
								<button ng-click="exportData()" >Exportar</button>
							</div>
                <!-- /.row -->
			<table class="table table-striped" style="display:none;" id='exportable'>
				<thead>
					<tr>
						<th ng-repeat="(i,th) in head" >{{th}}</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="row in testsList | orderBy : sort.column : sort.descending | myfilter:search">
						<td ng-click="loadTest(row);">{{row.createdAt}}</td>
						<td ng-click="loadTest(row);">{{row.departamento}}</td> 
						<td ng-click="loadTest(row);">{{row.incidencia}}%</td>
						<td ng-click="loadTest(row);">{{row.nombre}}</td> 
						<td ng-click="loadTest(row);">{{row.tipoCafe}}</td> 
						<td ng-click="loadTest(row);">{{row.user}}</td>
						</tr>
					</tr>
				</tbody>
			</table>
                <div class="row">
                    <div class="col-md-12">
	                   <div class="roya-editor">
		                   <table class="table table-striped">
							    <thead>
							        <tr>
							            <th ng-repeat="(i,th) in head" ng-class="selectedCls(i)" ng-click="changeSorting(i)">{{th}}</th>
							            <th></th>
							        </tr>
							    </thead>
							    <tbody>
							        <tr ng-repeat="row in testsList | orderBy : sort.column : sort.descending | myfilter:search | startFrom:(currentPage-1)*pageSize | limitTo:pageSize">
							            <td ng-click="loadTest(row);">{{row.createdAt}}</td>
							            <td ng-click="loadTest(row);">{{row.departamento}}</td> 
							            <td ng-click="loadTest(row);">{{row.incidencia}}%</td>
							            <td ng-click="loadTest(row);">{{row.nombre}}</td> 
							            <td ng-click="loadTest(row);">{{row.tipoCafe}}</td> 
							            <td ng-click="loadTest(row);">{{row.user}}</td>
							            <td> <button class="btn btn-danger" ng-click="removeTest(row._id)">X</button></td> 
								        </tr>
							        </tr>
							    </tbody>
							</table>
							<div class="text-center">
								<pagination page="currentPage" max-size="noOfPages" previous-text="<" next-text=">" first-text="<<" last-text=">>" boundary-link-numbers="true" total-items="totalItems" items-per-page="pageSize"></pagination>
							</div>
							<!-- Modal -->
								<div class="modal fade" id="detailModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
								  <div class="modal-dialog" role="document">
								    <div class="modal-content">
								      <div class="modal-header">
								        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
								        <h4 class="modal-title" id="myModalLabel">Detalle de Reporte</h4>
								      </div>
								      <div class="modal-body">
									      <dl>
											  <dt>ID:</dt>
											  <dd>{{detail._id}}</dd>
										  	  <dt>User:</dt>
											  <dd>{{detail.user}}</dd>
											  <dt>Creación:</dt>
											  <dd>{{detail.createdAt}}</dd>
											  <dt>Modo:</dt>
											  <dd><span ng-show="detail.advMode">avanzado</span><span ng-hide="detail.advMode">Basico</span></dd>
											  <dt>Bandolas:</dt>
											  <dd><span ng-show="detail.bandolas">2</span><span ng-hide="detail.bandolas">1</span></dd>
											  <dt>Plantas:</dt>
											  <dd>{{detail.plantas.length}}</dd>
											  <dt>Incidencia:</dt>
											  <dd>{{ (detail.incidencia).toFixed(2) }}%</dd>
											  <dt>incideancia Promedio por Planta:</dt>
											  <dd>{{ (detail.inideanciaPromedioPlanta).toFixed(2) }}%</dd>
											  <dt>Severidad Promedio:</dt>
											  <dd>{{ (detail.severidadPromedio).toFixed(2) }}%</dd>
											  <dt>Municipio:</dt>
											  <dd>{{ detail.unidad.departamento }}</dd>
											  <dt>Detalle Unidad:</dt>
											  <dd>
											  {{detail.unidad.nombre}}<br/>
											  {{detail.unidad._id}}<br/>
											  Actualizado: {{detail.unidad.updatedAt}} <br>
											  Creado: {{detail.unidad.createdAt}}<br>
											  <span ng-show="detail.unidad.sombra">Tiene Sombra</span><br>
											  Altitud: {{detail.unidad.altitud}}<br>
											  Area de Cafe: {{detail.unidad.areaCafe}}<br>
											  Area total: {{detail.unidad.areaTotal}}<br>
											  Distanciamiento: {{detail.unidad.distanciamiento}}<br>
											  lote: {{detail.unidad.lote}}<br>
											  Edad: {{detail.unidad.edadLote}}<br>
											  Departamento: {{detail.unidad.departamento}}<br>
											  Municipio: {{detail.unidad.municipio}}<br>
											  rendimiento: {{detail.unidad.rendimiento}}<br>
											  <span ng-show="detail.unidad.enmiendasSuelo">Enmiendas de Suelo</span><br>
											  <span ng-show="detail.unidad.fertilizaFollaje">Fertiliza Follaje</span><br>
											  <span ng-show="detail.unidad.fertilizaSuelo">Fertiliza Suelo: {{detail.unidad.fertilizaSueloMes}}</span><br>
											  Inicia Cosecha: {{detail.unidad.inicioCosecha}}<br>
											  Final Cosecha: {{detail.unidad.finalCosecha}}<br>
											  Epoca lluviosa: {{detail.unidad.epocalluviosa}}<br>
											  Fin Epoca lluviosa: {{detail.unidad.FinEpocalluviosa}}<br>
											  <span ng-show="detail.unidad.fertilizaSuelo">Fertiliza Suelo</span><br>
											  <span ng-show="detail.unidad.fungicidasRoya">Fungicidas de Roya: <span ng-show="detail.unidad.fungicidas.contacto">Contacto</span></span>, <span ng-show="detail.unidad.fungicidas.sistemico">Sistemico</span>; Fechas: {{detail.unidad.fungicidasFechas}}</span><br>
											  <span ng-show="detail.unidad.manejoTejido">Manejo de Tejido: {{detail.unidad.manejoTejidoMes}}</span><br>
											  <span ng-show="detail.unidad.muestreo">Muestreo: {{detail.unidad.muestreoMes}}</span><br>
											  <span> Tipo de Cafe: <span ng-show="detail.unidad.tipoCafe.duro">duro</span> <span ng-show="detail.unidad.tipoCafe.estrictamenteDuro
">estrictamenteDuro</span> <span ng-show="detail.unidad.tipoCafe.extraprime
">extraprime</span> <span ng-show="detail.unidad.tipoCafe.prime
">prime</span> <span ng-show="detail.unidad.tipoCafe.semiduro
">semiduro</span></span><br>
											  <span> Variedad: <span ng-show="detail.unidad.variedad.bourbon">bourbon</span> <span ng-show="detail.unidad.variedad.catuai
">catuai</span> <span ng-show="detail.unidad.variedad.caturra
">caturra</span> <span ng-show="detail.unidad.variedad.maragogype
">maragogype</span> </span><br>
											  <span ng-show="detail.unidad.verificaAgua">Tipo de verificacion de Agua: <span ng-show="detail.unidad.verificaAguaTipo.dureza">Contacto,</span></span> <span ng-show="detail.unidad.verificaAguaTipo.ph">Sistemico</span></span>; Fechas: {{detail.unidad.fungicidasFechas}}<br>
											  
											  
											  </dd>
											</dl>
								       
								      </div>
								      <div class="modal-footer">
								        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
								      </div>
								    </div>
								  </div>
								</div>
			            </div>
                    </div>
                </div>

				<!-- Modal -->
				<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
				  <div class="modal-dialog" role="document">
				    <div class="modal-content">
				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				        <h4 class="modal-title" id="myModalLabel">Crear Usuario</h4>
				      </div>
				      <div class="modal-body">
						        <div ng-show="error" class="alert alert-danger row">
								    <span>{{ error.message }}</span>
								  </div>
				
								  <form ng-submit="createUser()" name="newuserForm" id="newserForm" data-toggle="validator">
				
								    <div class="form-group">
								      <input type="text"
								      class="form-control"
								      placeholder="Nombre de usuario"
								      ng-model="newUser.username" required></input>
								    </div>
								    <div class="form-group">
								      <input type="text"
								      class="form-control"
								      placeholder="Numero Telefonico"
								      ng-model="newUser.phone" required></input>
								    </div>
								    <div class="form-group">
								      <label>Rol:</label>
								      <select class="form-control" ng-model="newUser.role">
										  <option>Cliente</option>
										  <option>Extensionista</option>
										  <option>Admin</option>
										</select>
								    </div>
								    <div class="form-group">
								      <label>Departamento/Municipio:</label>
								      <select id="departamentos" class="form-control" required>
										</select>
								    </div>
								    <div class="form-group">
								      <input type="email"
								      class="form-control"
								      placeholder="Correo Electrónico"
								      ng-model="newUser.email" required></input>
								    </div>
								   <div class="form-group">
											    <div class="form-group">
											      <input type="password" data-minlength="6" class="form-control" id="inputPassword" placeholder="Contraseña" required>
											    </div>
											    <div class="form-group">
											      <input type="password" class="form-control" id="inputPasswordConfirm" data-match="#inputPassword" data-match-error="No coinciden! " placeholder="Confirmar Contraseña" ng-model="newUser.password" required>
											      <div class="help-block with-errors"></div>
											    </div>
											</div>
								    
								  
								  </form>
				      </div>
				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				        <button type="button" class="btn btn-primary"  form="newuserForm" ng-disabled="newuserForm.$invalid" ng-click="createUser()">Guardar Usuario</button>
				      </div>
				    </div>
				  </div>
				</div>

            </div>
                </div>
        </div>
    </script>
    <script type="text/ng-template" id="/campo.html">
	     <div class="container-fluid adaptacion-wrap">

                <!-- Page Heading -->
                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
                        <h1 class="page-header">
                           Hoja de campo
                        </h1>
                        <p class="lead">Formulario </p>
                    </div>
                </div>
              
                <!-- /.row -->

                <div class="row">
                    <div class="col-md-8 col-md-offset-2">
	                   <form ng-submit="saveTable()">
		                   <div class="form-group ">
						      <label class="control-label requiredField" for="finca">
						       Finca ID
						       <span class="asteriskField">
						        *
						       </span>
						      </label>
						      <input class="form-control" id="finca" name="finca" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label requiredField" for="fecha">
						       Fecha
						       <span class="asteriskField">
						        *
						       </span>
						      </label>
						      <input class="form-control" id="fecha" name="fecha" placeholder="MM/DD/YYYY" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="bandolas">
						       Bandolas
						      </label>
						      <select class="select form-control" id="bandolas" name="bandolas">
						       <option value="1">
						        1
						       </option>
						       <option value="2">
						        2
						       </option>
						       <option value="3">
						        3
						       </option>
						       <option value="4">
						        4
						       </option>
						       <option value="5">
						        5
						       </option>
						       <option value="6">
						        6
						       </option>
						       <option value="7">
						        7
						       </option>
						       <option value="8">
						        8
						       </option>
						       <option value="9">
						        9
						       </option>
						       <option value="10">
						        10
						       </option>
						      </select>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="hojas">
						       Hojas totales
						      </label>
						      <input class="form-control" id="hojas" name="hojas" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="roya">
						       Roya
						      </label>
						      <input class="form-control" id="roya" name="roya" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="chasparria">
						       Chasparria
						      </label>
						      <input class="form-control" id="chasparria" name="chasparria" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="antracnosis">
						       Antracnosis
						      </label>
						      <input class="form-control" id="antracnosis" name="antracnosis" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="derrite">
						       Derrite
						      </label>
						      <input class="form-control" id="derrite" name="derrite" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="ojogallo">
						       Ojo de Gallo
						      </label>
						      <input class="form-control" id="ojogallo" name="ojogallo" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="hilachas">
						       Mal de Hilachas
						      </label>
						      <input class="form-control" id="hilachas" name="hilachas" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="otro">
						       Otro
						      </label>
						      <input class="form-control" id="otro" name="otro" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="nudos">
						       Nudos viejos
						      </label>
						      <input class="form-control" id="nudos" name="nudos" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="nudosmedios">
						       Nudos medios
						      </label>
						      <input class="form-control" id="nudosmedios" name="nudosmedios" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="nudosjovenes">
						       Nudos jovenes
						      </label>
						      <input class="form-control" id="nudosjovenes" name="nudosjovenes" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="frutosnudo5">
						       Frutos nudo 5
						      </label>
						      <input class="form-control" id="frutosnudo5" name="frutosnudo5" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="frutosnudo6">
						       Frutos nudo 6
						      </label>
						      <input class="form-control" id="frutosnudo6" name="frutosnudo6" type="text"/>
						     </div>
						     <div class="form-group ">
						      <label class="control-label " for="brocatotal">
						       Broca total nudos 5 y 6
						      </label>
						      <input class="form-control" id="brocatotal" name="brocatotal" type="text"/>
						     </div>
						     <div class="form-group ">
						      <div class=" ">
						       <div class="checkbox">
						        <label class="checkbox">
						         <input name="optional" type="checkbox" value="Presencia cochinilla"/>
						         Presencia cochinilla
						        </label>
						       </div>
						       <div class="checkbox">
						        <label class="checkbox">
						         <input name="optional" type="checkbox" value="Floral  Nueva"/>
						         Floral  Nueva
						        </label>
						       </div>
						       <div class="checkbox">
						        <label class="checkbox">
						         <input name="optional" type="checkbox" value="Vegetativa nueva"/>
						         Vegetativa nueva
						        </label>
						       </div>
						      </div>
						     </div>
						     <div class="form-group">
						      <div>
						       <button class="btn btn-primary " name="submit" type="submit">
						        Guardar Camabios
						       </button>
						      </div>
						     </div>
	                    	
	                    
	                   </form>
                    </div>
                </div>
                

            </div>
    </script>

    

    <!-- Bootstrap Core JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    
	
    <!-- Morris Charts JavaScript -->
    <script src = "bower_components/angular-scroll-glue/src/scrollglue.js"></script>
    <!-- Morris Charts JavaScript
    <script src="javascripts/plugins/morris/raphael.min.js"></script>
    <script src="javascripts/plugins/morris/morris.min.js"></script>
    <script src="javascripts/plugins/morris/morris-data.js"></script> -->
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
	<script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.10.0.js" type="text/javascript"></script>
</body>

</html>
